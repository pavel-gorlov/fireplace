# Fireplace

Эффект пламени камина на светодиодной ленте WS2811/WS2812 с управлением через веб-интерфейс.

![Веб-интерфейс](screenshot.png)

## Железо

- **Контроллер**: ESP8266 (Wemos D1 Mini)
- **Светодиоды**: WS2811/WS2812 лента, 144 LED
- **Пин данных**: GPIO0 (D3 на D1 Mini)

### Подключение

```
ESP8266          WS2811
-------          ------
GPIO0 (D3)  -->  DIN
GND         -->  GND
5V          -->  VCC (внешний БП для ленты)
```

## Первый запуск

1. Прошейте ESP8266
2. Подключитесь к WiFi сети `Fireplace-Setup` (пароль: `12345678`)
3. Откроется портал настройки WiFi (или перейдите на `192.168.4.1`)
4. Выберите вашу WiFi сеть и введите пароль
5. ESP перезагрузится и подключится к вашей сети

## Веб-интерфейс

После подключения к WiFi откройте в браузере IP-адрес устройства (см. Serial Monitor или проверьте в роутере).

### Режимы

| Режим | Описание |
|-------|----------|
| **Embers** | Тлеющие угли — медленное, тусклое свечение |
| **Fire** | Средний огонь — сбалансированный режим |
| **Flame** | Яркое пламя — быстрое, яркое мерцание |
| **Ice** | Ледяное пламя — от тёмно-синего до лазурно-голубого |
| **Rainbow** | Радуга — плавное переливание всеми цветами |
| **Firework** | Фейерверк — разноцветные расходящиеся кольца |
| **Storm** | Гроза — молнии на тёмно-синем фоне |
| **Rain** | Дождь — падающие капли с брызгами |
| **Tree** | Дерево — коричневый ствол и колышущаяся зелёная крона |

### Настройки

- **Update interval** (5-100 мс) — интервал обновления, меньше = быстрее мерцание/движение
- **Brightness** (10-255) — общая яркость ленты

При выборе режима автоматически применяются пресеты:

| Режим | Interval | Brightness |
|-------|----------|------------|
| Embers | 70 мс | 70 |
| Fire | 30 мс | 150 |
| Flame | 5 мс | 255 |
| Ice | 10 мс | 200 |
| Rainbow | 20 мс | 255 |
| Firework | 30 мс | 255 |
| Storm | 50 мс | 200 |
| Rain | 40 мс | 255 |
| Tree | 30 мс | 200 |

## Сохранение настроек

Все настройки (режим, интервал, яркость) сохраняются в EEPROM и восстанавливаются после перезагрузки.

## Смена WiFi сети

В веб-интерфейсе нажмите ссылку **WiFi Settings** внизу страницы. Откроется страница с:
- Текущей сетью и IP-адресом
- Списком доступных WiFi сетей (кликните для выбора)
- Формой для ввода пароля

Подключение происходит без перезагрузки устройства. При успешном подключении отобразится новый IP-адрес.

## Зависимости

- FastLED 3.10.3
- WiFiManager 0.16.0

## Сборка

```bash
pio run
```

## Прошивка

```bash
pio run -t upload
```

## Serial Monitor

```bash
pio device monitor
```
